# 1.4 PLC的硬件结构

> 本节将介绍PLC的硬件组成部分

## 学习目标

- 掌握PLC的基本硬件结构
- 理解各部件的功能
- 了解I/O模块的类型

---

## 1. PLC硬件系统概述

### 1.1 硬件结构框图

```
PLC硬件系统结构：

┌─────────────────────────────────────────────────────────────┐
│                         PLC主机                             │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐       │
│  │         │  │         │  │         │  │         │       │
│  │ 电源模块 │  │ CPU模块 │  │ 存储器  │  │ 通信接口 │       │
│  │         │  │         │  │         │  │         │       │
│  └────┬────┘  └────┬────┘  └────┬────┘  └────┬────┘       │
│       │            │            │            │             │
│       └────────────┴────────────┴────────────┘             │
│                         │                                   │
│                    系统总线                                 │
│                         │                                   │
│       ┌─────────────────┼─────────────────┐                │
│       │                 │                 │                │
│  ┌────┴────┐      ┌────┴────┐      ┌────┴────┐           │
│  │ 输入模块 │      │ 输出模块 │      │ 特殊模块 │           │
│  │  (DI)   │      │  (DO)   │      │(AI/AO等)│           │
│  └────┬────┘      └────┬────┘      └────┬────┘           │
└───────┼────────────────┼────────────────┼──────────────────┘
        │                │                │
        ▼                ▼                ▼
   ┌─────────┐     ┌─────────┐     ┌─────────┐
   │外部输入 │     │外部输出 │     │特殊设备 │
   │(按钮等) │     │(电机等) │     │(传感器) │
   └─────────┘     └─────────┘     └─────────┘
```

### 1.2 硬件分类

根据结构形式，PLC可分为：

| 类型 | 特点 | 适用场合 |
|------|------|----------|
| **整体式** | CPU、I/O集成在一起 | 小型控制系统 |
| **模块式** | 各功能模块独立，可自由组合 | 中大型控制系统 |
| **混合式** | 主机整体式，可扩展模块 | 灵活应用 |

```
整体式PLC vs 模块式PLC：

整体式：                        模块式：
┌─────────────────────┐       ┌────┬────┬────┬────┬────┐
│  CPU  │ I/O │ 电源  │       │电源│CPU │ DI │ DO │ AI │
│       │     │       │       │模块│模块│模块│模块│模块│
└─────────────────────┘       └────┴────┴────┴────┴────┘
    紧凑、经济                    灵活、可扩展
```

---

## 2. CPU模块

### 2.1 CPU的功能

CPU（中央处理单元）是PLC的核心，相当于人的"大脑"。

```
CPU模块的主要功能：

┌────────────────────────────────────────────────┐
│                   CPU模块                       │
├────────────────────────────────────────────────┤
│  ● 程序执行 ────── 执行用户编写的控制程序      │
│  ● 数据处理 ────── 进行逻辑运算、数学运算      │
│  ● I/O控制 ────── 控制输入采样和输出刷新       │
│  ● 通信管理 ────── 与外部设备进行数据交换      │
│  ● 自诊断  ────── 检测系统故障，报警处理       │
│  ● 系统管理 ────── 协调各模块工作              │
└────────────────────────────────────────────────┘
```

### 2.2 CPU的性能指标

| 指标 | 说明 | 典型值 |
|------|------|--------|
| **位数** | 处理器字长 | 16位、32位、64位 |
| **主频** | 时钟频率 | 几十MHz到几GHz |
| **指令速度** | 执行基本指令时间 | 0.01-1 μs/步 |
| **程序容量** | 可存储程序大小 | 几KB到几十MB |
| **I/O点数** | 可控制的I/O数量 | 几十到数万点 |

### 2.3 不同规模CPU对比

```
PLC规模分类：

┌──────────┬─────────────┬─────────────┬─────────────┐
│   规模   │   I/O点数   │  程序容量   │   典型应用   │
├──────────┼─────────────┼─────────────┼─────────────┤
│  微型    │   <64点     │   <4KB     │  单机控制   │
├──────────┼─────────────┼─────────────┼─────────────┤
│  小型    │  64-256点   │  4-16KB    │  小型设备   │
├──────────┼─────────────┼─────────────┼─────────────┤
│  中型    │ 256-2048点  │  16-128KB  │  生产线     │
├──────────┼─────────────┼─────────────┼─────────────┤
│  大型    │  >2048点    │   >128KB   │  工厂级     │
└──────────┴─────────────┴─────────────┴─────────────┘
```

---

## 3. 电源模块

### 3.1 电源模块的功能

电源模块为PLC各部件提供稳定的工作电源。

```
电源模块功能示意：

外部电源              电源模块                 各功能模块
                  ┌─────────────┐
 AC220V  ────────▶│  整流滤波   │────▶  DC 24V（传感器电源）
   或              │             │
 AC110V  ────────▶│  DC-DC转换  │────▶  DC 5V（CPU/逻辑电路）
   或              │             │
 DC24V   ────────▶│  稳压保护   │────▶  DC 3.3V（存储器）
                  └─────────────┘
```

### 3.2 电源规格

| 参数 | 说明 |
|------|------|
| **输入电压** | AC 100-240V 或 DC 24V |
| **输出电压** | DC 5V、DC 24V等 |
| **输出功率** | 几十W到几百W |
| **保护功能** | 过流、过压、短路保护 |

### 3.3 电源选型注意事项

```
电源容量计算：

总功耗 = CPU功耗 + Σ(各模块功耗) + 传感器功耗 + 余量

建议：电源容量 ≥ 总功耗 × 1.3（留30%余量）

示例：
CPU模块：5W
DI模块×2：2W×2 = 4W
DO模块×1：3W
传感器：10W
────────────────
总计：22W
电源选型：≥ 22×1.3 = 28.6W，选30W或以上
```

---

## 4. 输入模块

### 4.1 数字量输入模块（DI）

数字量输入模块用于接收开关量信号（0或1）。

```
数字量输入模块结构：

外部信号        输入模块内部                PLC内部
            ┌─────────────────────┐
 按钮 ──────│  光电耦合隔离       │
            │  ┌─────┐            │      输入映像
 开关 ──────│──│ LED │──│>├──────│────▶ 寄存器
            │  └─────┘  光耦      │
传感器 ─────│  滤波电路           │
            └─────────────────────┘
                   │
              指示灯LED
```

**DI模块类型：**

| 类型 | 输入电压 | 说明 |
|------|----------|------|
| **DC输入** | DC 24V | 最常用，响应快 |
| **AC输入** | AC 110V/220V | 直接接交流信号 |
| **DC/AC通用** | DC/AC | 灵活性高 |

### 4.2 模拟量输入模块（AI）

模拟量输入模块用于接收连续变化的信号。

```
模拟量输入处理流程：

传感器信号        A/D转换            数字值
                ┌─────────┐
  4-20mA ──────▶│         │────▶  0-27648
                │  A/D    │        (16位)
  0-10V  ──────▶│  转换器 │────▶  0-27648
                │         │
热电偶/热电阻───▶│         │────▶  温度值
                └─────────┘
```

**AI模块规格：**

| 参数 | 常见规格 |
|------|----------|
| **信号类型** | 电压：0-10V、±10V；电流：4-20mA、0-20mA |
| **分辨率** | 12位、14位、16位 |
| **转换时间** | 几十μs到几ms |
| **通道数** | 4、8、16通道等 |

### 4.3 输入接线方式

```
数字量输入接线（源型/漏型）：

【漏型输入】（NPN型传感器）        【源型输入】（PNP型传感器）
                                   
    DC24V                              DC24V
      │                                  │
      │                                  ├──────┐
   ┌──┴──┐                            ┌──┴──┐   │
   │传感器│                            │传感器│   │
   │(NPN)│                            │(PNP)│   │
   └──┬──┘                            └──┬──┘   │
      │                                  │      │
      └───────▶ DI端子                   └──────│▶ DI端子
                  │                             │
              COM端子 ◀─────────────────────────┘
                  │
                 GND
```

---

## 5. 输出模块

### 5.1 数字量输出模块（DO）

数字量输出模块用于控制外部执行机构的通断。

**输出类型对比：**

| 类型 | 符号 | 优点 | 缺点 | 适用场合 |
|------|------|------|------|----------|
| **继电器输出** | R | 可带交直流负载，触点隔离 | 寿命有限，速度慢 | 一般场合 |
| **晶体管输出** | T | 速度快，寿命长 | 只能带直流负载 | 高速、高频场合 |
| **晶闸管输出** | S | 可带交流负载，速度快 | 只能带交流负载 | 交流高速场合 |

```
三种输出类型结构：

【继电器输出】          【晶体管输出】         【晶闸管输出】
                       
  内部    外部          内部    外部          内部    外部
  ┌───┐  ┌───┐        ┌───┐  ┌───┐        ┌───┐  ┌───┐
──┤   ├──┤   ├──      ──┤   ├──┤   ├──      ──┤   ├──┤   ├──
  │继电│  │负载│        │晶体│  │负载│        │晶闸│  │负载│
  │ 器 │  │   │        │ 管 │  │(DC)│        │ 管 │  │(AC)│
  └───┘  └───┘        └───┘  └───┘        └───┘  └───┘
 AC/DC均可            仅DC负载            仅AC负载
```

### 5.2 模拟量输出模块（AO）

模拟量输出模块用于输出连续变化的控制信号。

```
模拟量输出处理流程：

 数字值            D/A转换           输出信号
                ┌─────────┐
0-27648 ──────▶│         │────▶  4-20mA ──▶ 变频器
 (16位)         │  D/A    │
                │  转换器 │────▶  0-10V  ──▶ 调节阀
                │         │
                └─────────┘
```

### 5.3 输出接线示例

```
继电器输出接线示例：

        PLC输出模块              外部负载
     ┌─────────────┐
     │   Q0.0  ────┼─────┐
     │   COM   ────┼──┐  │     ┌────────┐
     │             │  │  └─────┤ 指示灯 │
     │             │  │        └────┬───┘
     │   Q0.1  ────┼──┼────────────┤
     │             │  │            │
     │   Q0.2  ────┼──┼─────┐      │
     │             │  │     │   ┌──┴───┐
     │             │  └─────┼───┤ 继电器│
     └─────────────┘        │   └──────┘
                            │
                         AC220V
```

---

## 6. 通信模块

### 6.1 通信接口类型

```
PLC常见通信接口：

┌────────────────────────────────────────────────────────┐
│                     PLC通信模块                        │
├────────────┬──────────────┬───────────────────────────┤
│   接口类型  │    标准      │         用途              │
├────────────┼──────────────┼───────────────────────────┤
│   RS232    │   串行通信   │  点对点，编程调试         │
│   RS485    │   串行通信   │  多点通信，现场总线       │
│  以太网    │  TCP/IP      │  高速通信，远程监控       │
│  PROFIBUS  │   现场总线   │  西门子系统组网           │
│  DeviceNet │   现场总线   │  罗克韦尔系统组网         │
│  CC-Link   │   现场总线   │  三菱系统组网             │
└────────────┴──────────────┴───────────────────────────┘
```

### 6.2 通信网络拓扑

```
常见PLC通信网络架构：

           ┌─────────────┐
           │   上位机    │
           │ (SCADA/HMI) │
           └──────┬──────┘
                  │ 以太网
    ┌─────────────┼─────────────┐
    │             │             │
┌───┴───┐    ┌───┴───┐    ┌───┴───┐
│ PLC 1 │    │ PLC 2 │    │ PLC 3 │
└───┬───┘    └───┬───┘    └───┬───┘
    │ 现场       │            │
    │ 总线       │            │
┌───┴───┐    ┌───┴───┐    ┌───┴───┐
│远程I/O │    │变频器 │    │ 仪表  │
└───────┘    └───────┘    └───────┘
```

---

## 7. 存储器结构

### 7.1 存储器类型

```
PLC存储器结构：

┌─────────────────────────────────────────────────────┐
│                    PLC存储器                        │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌─────────────┐   ┌─────────────┐                 │
│  │  系统ROM    │   │  用户程序    │                 │
│  │ (操作系统)  │   │  存储器      │                 │
│  │  只读       │   │  (Flash)    │                 │
│  └─────────────┘   └─────────────┘                 │
│                                                     │
│  ┌─────────────┐   ┌─────────────┐                 │
│  │  系统RAM    │   │  数据存储器  │                 │
│  │ (工作区)    │   │  (保持/非保持)│                 │
│  │  易失       │   │              │                 │
│  └─────────────┘   └─────────────┘                 │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 7.2 数据区划分

| 区域 | 符号(西门子) | 说明 |
|------|-------------|------|
| **输入映像** | I | 存储输入端子状态 |
| **输出映像** | Q | 存储输出端子状态 |
| **位存储器** | M | 内部中间继电器 |
| **定时器** | T | 定时器当前值和状态 |
| **计数器** | C | 计数器当前值和状态 |
| **数据块** | DB | 用户数据存储 |

---

## 8. 实物示例

### 8.1 西门子S7-1200

```
西门子S7-1200硬件配置示例：

┌─────────────────────────────────────────────────────┐
│                    S7-1200 PLC                      │
├────────┬────────┬────────┬────────┬────────────────┤
│  电源   │  CPU   │  DI    │  DO    │    信号板      │
│  模块   │ 1214C  │ SM1221 │ SM1222 │   (可选)       │
│        │        │ 16DI   │ 16DO   │               │
├────────┼────────┼────────┼────────┼────────────────┤
│ 24VDC  │内置14DI│ 扩展   │ 扩展   │  AI/AO扩展    │
│  输入  │ 10DO   │ 16点   │ 16点   │               │
│        │ 2AI    │        │        │               │
└────────┴────────┴────────┴────────┴────────────────┘

总I/O配置：30DI + 26DO + 2AI（可继续扩展）
```

### 8.2 三菱FX5U

```
三菱FX5U硬件配置示例：

┌─────────────────────────────────────────────────────┐
│                    FX5U PLC                         │
├────────────────────┬────────────────────────────────┤
│     主机单元       │        扩展单元                │
│  ┌──────────────┐  │  ┌────────┐  ┌────────┐      │
│  │ FX5U-32MT/ES │  │  │FX5-16EX│  │FX5-4AD │      │
│  │  16DI + 16DO │  │  │  16DI  │  │  4AI   │      │
│  │  内置以太网  │  │  │        │  │        │      │
│  └──────────────┘  │  └────────┘  └────────┘      │
└────────────────────┴────────────────────────────────┘

总I/O配置：32DI + 16DO + 4AI
```

---

## 本节小结

```
PLC硬件结构要点：

┌────────────────────────────────────────────────────┐
│  1. CPU模块：PLC的核心，负责程序执行和数据处理    │
│                                                    │
│  2. 电源模块：为各部件提供稳定电源                │
│                                                    │
│  3. 输入模块：接收外部信号（DI数字量/AI模拟量）   │
│                                                    │
│  4. 输出模块：控制外部设备（DO数字量/AO模拟量）   │
│                                                    │
│  5. 通信模块：实现与其他设备的数据交换            │
│                                                    │
│  6. 存储器：存储程序和数据                        │
└────────────────────────────────────────────────────┘
```

---

## 思考题

1. PLC的CPU模块有哪些主要功能？
2. 数字量输出的三种类型各有什么特点？
3. 如何根据控制系统的需求选择合适的PLC？
4. 什么情况下需要使用模拟量输入/输出模块？

---

[← 上一节：1.3 PLC的工作原理](./1.3.md) | [下一节：1.5 主流PLC品牌介绍 →](./1.5.md)
