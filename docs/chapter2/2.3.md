# 2.3 基本逻辑指令

> 本节将介绍PLC的基本逻辑运算指令

## 学习目标

- 掌握基本逻辑运算的概念
- 理解与、或、非逻辑关系
- 能够使用逻辑指令编程

---

## 1. 与（AND）逻辑

### 1.1 概念

**与逻辑**：只有当**所有**输入条件都为真（1）时，输出才为真（1）。

```
与逻辑示意：

条件A ───┐
         ├─── 输出 = A AND B
条件B ───┘

生活类比：
- 串联开关：两个开关都闭合，灯才亮
- 保险箱：钥匙+密码都对，才能打开
- 登录：用户名+密码都正确，才能登录
```

### 1.2 真值表

| 输入A | 输入B | 输出（A AND B） |
|-------|-------|-----------------|
| 0 | 0 | 0 |
| 0 | 1 | 0 |
| 1 | 0 | 0 |
| 1 | 1 | **1** |

### 1.3 梯形图表示

```
与逻辑的梯形图表示（串联）：

    I0.0   I0.1
────┤├────┤├────────────────( Q0.0 )──

说明：I0.0和I0.1串联，都为1时Q0.0才为1

多个输入的与逻辑：
    I0.0   I0.1   I0.2   I0.3
────┤├────┤├────┤├────┤├────( Q0.0 )──

Q0.0 = I0.0 AND I0.1 AND I0.2 AND I0.3
```

### 1.4 应用示例

**安全门控制**：设备运行需要两个安全门都关闭。

```
I/O分配：
I0.0 - 安全门1信号（关闭=1）
I0.1 - 安全门2信号（关闭=1）
I0.2 - 启动按钮
Q0.0 - 设备运行

梯形图：
    I0.0   I0.1   I0.2
────┤├────┤├────┤├────────────( Q0.0 )──

逻辑：只有两扇门都关闭且按下启动按钮，设备才运行
```

---

## 2. 或（OR）逻辑

### 2.1 概念

**或逻辑**：只要有**任一**输入条件为真（1），输出就为真（1）。

```
或逻辑示意：

条件A ───┬
         ├─── 输出 = A OR B
条件B ───┘

生活类比：
- 并联开关：任一开关闭合，灯就亮
- 报警系统：任一传感器触发，警报就响
- 两地控制：任一地点都可以控制
```

### 2.2 真值表

| 输入A | 输入B | 输出（A OR B） |
|-------|-------|----------------|
| 0 | 0 | 0 |
| 0 | 1 | **1** |
| 1 | 0 | **1** |
| 1 | 1 | **1** |

### 2.3 梯形图表示

```
或逻辑的梯形图表示（并联）：

    I0.0
────┤├────┬──────────────────( Q0.0 )──
          │
    I0.1  │
────┤├────┘

说明：I0.0和I0.1并联，任一为1时Q0.0就为1

多个输入的或逻辑：
    I0.0
────┤├────┬──────────────────( Q0.0 )──
          │
    I0.1  │
────┤├────┤
          │
    I0.2  │
────┤├────┘

Q0.0 = I0.0 OR I0.1 OR I0.2
```

### 2.4 应用示例

**多点报警**：任一传感器检测到异常就报警。

```
I/O分配：
I0.0 - 温度传感器（超温=1）
I0.1 - 压力传感器（超压=1）
I0.2 - 液位传感器（超高=1）
Q0.0 - 报警输出

梯形图：
    I0.0
────┤├────┬──────────────────( Q0.0 )──
          │
    I0.1  │
────┤├────┤
          │
    I0.2  │
────┤├────┘

逻辑：任一传感器触发，报警输出ON
```

---

## 3. 非（NOT）逻辑

### 3.1 概念

**非逻辑**：输出与输入**相反**，输入为真时输出为假，输入为假时输出为真。

```
非逻辑示意：

条件A ───[NOT]─── 输出 = NOT A

生活类比：
- 常闭开关：不按是通的，按下才断开
- 门禁：没有卡=锁着，有卡=开门
```

### 3.2 真值表

| 输入A | 输出（NOT A） |
|-------|---------------|
| 0 | **1** |
| 1 | 0 |

### 3.3 梯形图表示

```
非逻辑的梯形图表示（常闭触点）：

    I0.0
────┤/├──────────────────────( Q0.0 )──

说明：
- I0.0=0时，常闭触点导通，Q0.0=1
- I0.0=1时，常闭触点断开，Q0.0=0

Q0.0 = NOT I0.0
```

### 3.4 应用示例

**运行指示**：设备不运行时指示灯亮。

```
I/O分配：
I0.0 - 设备运行信号（运行=1）
Q0.0 - 待机指示灯

梯形图：
    I0.0
────┤/├──────────────────────( Q0.0 )──

逻辑：
- 设备运行（I0.0=1）时，指示灯灭
- 设备停止（I0.0=0）时，指示灯亮
```

---

## 4. 与非（NAND）逻辑

### 4.1 概念

**与非逻辑**：先进行与运算，再取反。等于AND + NOT。

```
与非逻辑：

输出 = NOT (A AND B)

真值表：
A | B | A AND B | NOT(A AND B)
0 | 0 |    0    |      1
0 | 1 |    0    |      1
1 | 0 |    0    |      1
1 | 1 |    1    |      0

特点：只有AB都为1时，输出才为0
```

### 4.2 梯形图表示

```
与非逻辑的梯形图：

方法1：使用常闭触点
    I0.0
────┤/├──────────────────────( Q0.0 )──
          │
    I0.1  │
────┤/├──┘

方法2：使用中间继电器
    I0.0   I0.1
────┤├────┤├────────────────( M0.0 )──  // A AND B

    M0.0
────┤/├──────────────────────( Q0.0 )──  // NOT (A AND B)
```

---

## 5. 或非（NOR）逻辑

### 5.1 概念

**或非逻辑**：先进行或运算，再取反。等于OR + NOT。

```
或非逻辑：

输出 = NOT (A OR B)

真值表：
A | B | A OR B | NOT(A OR B)
0 | 0 |   0    |      1
0 | 1 |   1    |      0
1 | 0 |   1    |      0
1 | 1 |   1    |      0

特点：只有AB都为0时，输出才为1
```

### 5.2 梯形图表示

```
或非逻辑的梯形图：

    I0.0   I0.1
────┤/├───┤/├────────────────( Q0.0 )──

说明：两个常闭触点串联
- I0.0=0且I0.1=0时，两个常闭都导通，Q0.0=1
- 任一为1时，对应常闭断开，Q0.0=0
```

---

## 6. 异或（XOR）逻辑

### 6.1 概念

**异或逻辑**：当两个输入**不同**时，输出为1；当两个输入**相同**时，输出为0。

```
异或逻辑：

输出 = A XOR B

真值表：
A | B | A XOR B
0 | 0 |    0
0 | 1 |    1
1 | 0 |    1
1 | 1 |    0

口诀："相同为0，不同为1"

生活类比：
- 楼梯灯：上下两个开关，任一改变状态，灯状态改变
```

### 6.2 梯形图表示

```
异或逻辑的梯形图：

    I0.0   I0.1
────┤├────┤/├────┬────────────( Q0.0 )──
                 │
    I0.0   I0.1  │
────┤/├───┤├────┘

逻辑分析：
- 第一条支路：I0.0=1且I0.1=0时导通
- 第二条支路：I0.0=0且I0.1=1时导通
- 结果：两者不同时输出为1
```

### 6.3 应用示例

**双联开关（楼梯灯控制）**

```
I/O分配：
I0.0 - 楼下开关
I0.1 - 楼上开关
Q0.0 - 楼梯灯

梯形图：
    I0.0   I0.1
────┤├────┤/├────┬────────────( Q0.0 )──
                 │
    I0.0   I0.1  │
────┤/├───┤├────┘

工作原理：
初始：I0.0=0, I0.1=0, 灯灭
按楼下开关：I0.0=1, I0.1=0, 灯亮
按楼上开关：I0.0=1, I0.1=1, 灯灭
再按楼下开关：I0.0=0, I0.1=1, 灯亮
...
```

---

## 7. 逻辑指令综合应用

### 7.1 复合逻辑表达式

```
复杂逻辑的分解：

表达式：Q0.0 = (I0.0 AND I0.1) OR (I0.2 AND NOT I0.3)

分析：
- 第一项：I0.0 AND I0.1（两个常开串联）
- 第二项：I0.2 AND NOT I0.3（常开和常闭串联）
- 两项之间：OR（并联）

梯形图：
    I0.0   I0.1
────┤├────┤├──────┬──────────( Q0.0 )──
                  │
    I0.2   I0.3   │
────┤├────┤/├────┘
```

### 7.2 实际应用案例

**案例：电机启停与保护**

```
控制要求：
1. 按下启动按钮，电机运行
2. 按下停止按钮，电机停止
3. 过载保护动作时，电机停止
4. 电机运行时，运行指示灯亮
5. 电机停止时，停止指示灯亮

I/O分配：
输入：
I0.0 - 启动按钮（常开）
I0.1 - 停止按钮（常闭）
I0.2 - 过载保护（常闭）

输出：
Q0.0 - 电机接触器
Q0.1 - 运行指示灯
Q0.2 - 停止指示灯

梯形图程序：

网络1：电机控制
    I0.0        I0.1   I0.2
────┤├────┬────┤├────┤├──────( Q0.0 )──
          │
    Q0.0  │
────┤├────┘

逻辑：(I0.0 OR Q0.0) AND I0.1 AND I0.2 = Q0.0

网络2：运行指示灯
    Q0.0
────┤├────────────────────────( Q0.1 )──

逻辑：电机运行时，运行灯亮

网络3：停止指示灯
    Q0.0
────┤/├───────────────────────( Q0.2 )──

逻辑：电机停止时，停止灯亮
```

### 7.3 逻辑简化技巧

```
逻辑简化原则：

1. 合并相同项
   A AND B OR A AND C = A AND (B OR C)
   
   简化前：               简化后：
   ──┤├──┤├──┬──( )──     ──┤├──┬──┤├──┬──( )──
           │                   │     │
   ──┤├──┤├──┘                 └──┤├──┘

2. 消去互补项
   A AND NOT A = 0（永假）
   A OR NOT A = 1（永真）

3. 吸收律
   A OR (A AND B) = A
   A AND (A OR B) = A

4. 德摩根定律
   NOT(A AND B) = NOT A OR NOT B
   NOT(A OR B) = NOT A AND NOT B
```

---

## 8. 逻辑运算符号对照表

### 8.1 各品牌PLC逻辑指令

| 逻辑 | 西门子 | 三菱 | 欧姆龙 | AB |
|------|--------|------|--------|-----|
| 装载 | A/LD | LD | LD | XIC |
| 装载非 | AN/LDN | LDI | LD NOT | XIO |
| 与 | A | AND | AND | 串联XIC |
| 与非 | AN | ANI | AND NOT | 串联XIO |
| 或 | O | OR | OR | 并联XIC |
| 或非 | ON | ORI | OR NOT | 并联XIO |
| 输出 | = | OUT | OUT | OTE |
| 置位 | S | SET | SET | OTL |
| 复位 | R | RST | RSET | OTU |

### 8.2 布尔代数符号

| 逻辑 | 梯形图 | 布尔代数 | C语言 | 说明 |
|------|--------|----------|-------|------|
| AND | 串联 | A·B 或 AB | A && B | 与 |
| OR | 并联 | A+B | A \|\| B | 或 |
| NOT | 常闭 | Ā 或 /A | !A | 非 |
| XOR | 特殊 | A⊕B | A ^ B | 异或 |

---

## 本节小结

```
基本逻辑指令要点：

┌────────────────────────────────────────────────────┐
│  逻辑类型        梯形图表示        特点            │
├────────────────────────────────────────────────────┤
│  AND（与）       串联触点          全1才1          │
│  OR（或）        并联触点          有1就1          │
│  NOT（非）       常闭触点          取反            │
│  NAND（与非）    AND后取反         全1才0          │
│  NOR（或非）     常闭触点串联      全0才1          │
│  XOR（异或）     特殊组合          不同才1         │
├────────────────────────────────────────────────────┤
│  记忆口诀：                                        │
│  · 串联是与，并联是或                             │
│  · 常开随信号，常闭反着来                         │
│  · 复杂逻辑先分解，再用基本逻辑组合               │
└────────────────────────────────────────────────────┘
```

---

## 练习题

1. 写出下列逻辑表达式的梯形图：
   - Q0.0 = I0.0 AND I0.1 AND I0.2
   - Q0.1 = I0.3 OR I0.4 OR I0.5
   - Q0.2 = (I0.0 OR I0.1) AND NOT I0.2

2. 分析下列梯形图的逻辑表达式：
   ```
       I0.0   I0.1
   ────┤/├───┤├────┬──────────( Q0.0 )──
                   │
       I0.2        │
   ────┤├──────────┘
   ```

3. 设计一个逻辑电路：当温度传感器（I0.0）或压力传感器（I0.1）触发，且安全开关（I0.2）闭合时，报警输出（Q0.0）动作。

---

[← 上一节：2.2 梯形图编程入门](./2.2.md) | [下一节：2.4 数据类型与寻址方式 →](./2.4.md)
